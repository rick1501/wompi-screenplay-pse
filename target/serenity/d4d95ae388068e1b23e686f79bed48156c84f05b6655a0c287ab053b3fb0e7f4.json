{"name":"Error al crear PSE por documento inválido","id":"creación-de-transacción-pse-en-wompi;error-al-crear-pse-por-documento-inválido","scenarioId":"pse_transaccion:Error al crear PSE por documento inválido","methodName":"Error al crear PSE por documento inválido","testSteps":[{"number":1,"description":"Dado que configuro el API de Wompi","duration":6,"startTime":"2025-08-16T21:04:24.720144700-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0},{"number":2,"description":"Cuando obtengo el token de aceptación del merchant","duration":608,"startTime":"2025-08-16T21:04:24.726286100-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":3,"description":"Juan obtener token aceptacion","duration":598,"startTime":"2025-08-16T21:04:24.732177100-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":4,"description":"Juan executes a GET on the resource /merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","duration":591,"startTime":"2025-08-16T21:04:24.739735700-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":2,"children":[{"number":5,"description":"GET https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","duration":0,"startTime":"2025-08-16T21:04:25.331025700-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"GET","path":"https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","content":"","contentType":"application/json","requestHeaders":"Accept\u003d*/*\r\n\t\t\t\tContent-Type\u003dapplication/json","requestCookies":"","responseHeaders":"Content-Type: application/json\r\nTransfer-Encoding: chunked\r\nConnection: keep-alive\r\nDate: Sun, 17 Aug 2025 02:04:25 GMT\r\napigw-requestid: PbXKkiBXoAMEVjA\u003d\r\nvary: Origin\r\nvary: accept-encoding\r\ncontent-encoding: gzip\r\nX-Cache: Miss from cloudfront\r\nVia: 1.1 04a7e6061ff44278cba30d4bada61a54.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Pop: MIA3-C3\r\nX-Amz-Cf-Id: NJUjGUeowxhjKdFmukgYqMXxvW8fz3Me-Z6oA3Rlnk4Yiu273YoKwQ\u003d\u003d\r\nX-XSS-Protection: 1; mode\u003dblock\r\nX-Frame-Options: SAMEORIGIN\r\nReferrer-Policy: strict-origin-when-cross-origin\r\nX-Content-Type-Options: nosniff\r\nStrict-Transport-Security: max-age\u003d31536000\r","responseCookies":"\r","responseBody":"{\n    \"data\": {\n        \"id\": 5113,\n        \"name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"email\": \"pruebasensandbox@yopmail.com\",\n        \"contact_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"phone_number\": \"+573000000000\",\n        \"active\": true,\n        \"logo_url\": null,\n        \"legal_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"legal_id_type\": \"CC\",\n        \"legal_id\": \"1069879849\",\n        \"public_key\": \"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\n        \"accepted_currencies\": [\n            \"COP\"\n        ],\n        \"fraud_javascript_key\": null,\n        \"fraud_groups\": [\n            \n        ],\n        \"accepted_payment_methods\": [\n            \"NEQUI\",\n            \"PSE\",\n            \"BANCOLOMBIA_TRANSFER\",\n            \"CARD\",\n            \"BANCOLOMBIA_COLLECT\",\n            \"BANCOLOMBIA_QR\",\n            \"DAVIPLATA\",\n            \"BANCOLOMBIA_BNPL\",\n            \"SU_PLUS\"\n        ],\n        \"payment_methods\": [\n            {\n                \"name\": \"BANCOLOMBIA_BNPL\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_BNPL_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_COLLECT\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_COLLECT_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_QR\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_QR_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_TRANSFER\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_TRANSFER_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"CARD\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"CARD_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"DAVIPLATA\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"DAVIPLATA_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"NEQUI\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"NEQUI_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"PSE\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"PSE_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"SU_PLUS\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"SU_PLUS_SANDBOX\"\n                    }\n                ]\n            }\n        ],\n        \"presigned_acceptance\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3NTUzOTYyNjUtMTgzNDYiLCJlbWFpbCI6IiIsImV4cCI6MTc1NTM5OTg2NX0.cSUYRbsf3rWpagXFlpHANePjZWynomf6yDWOUqe2fqk\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/reglamento-Usuarios-Colombia.pdf\",\n            \"type\": \"END_USER_POLICY\"\n        },\n        \"presigned_personal_data_auth\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6NDc0LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLXRyYXRhbWllbnRvLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiNTE2ODYzZjA3NzZlZWY3NjBkNGI5OWFiMWJlZjRjNzgiLCJqaXQiOiIxNzU1Mzk2MjY1LTIyNDQ3IiwiZW1haWwiOiIifQ.Q2C1e__j7Z4l3dqCxZMD-ggoBsBtc8HImaqpQVrcYZE\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/autorizacion-tratamiento-datos-personales.pdf\",\n            \"type\": \"PERSONAL_DATA_AUTH\"\n        },\n        \"click_to_pay_dpa_id\": null,\n        \"mcc\": null,\n        \"acquirer_id\": null\n    },\n    \"meta\": {\n        \n    }\n}","statusCode":200},"precondition":false,"level":3}]}]}]},{"number":6,"description":"Y intento crear una transacción PSE con documento \"000\"","duration":615,"startTime":"2025-08-16T21:04:25.337058300-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":7,"description":"Juan crear transaccion pse","duration":605,"startTime":"2025-08-16T21:04:25.343092300-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":8,"description":"Juan executes a POST on the resource /transactions","duration":600,"startTime":"2025-08-16T21:04:25.348107900-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":2,"children":[{"number":9,"description":"POST https://api-sandbox.co.uat.wompi.dev/v1/transactions","duration":0,"startTime":"2025-08-16T21:04:25.948378100-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"POST","path":"https://api-sandbox.co.uat.wompi.dev/v1/transactions","content":"{\n    \"reference\": \"ref-1755396265344\",\n    \"amount_in_cents\": 500000,\n    \"signature\": \"8b49bf1a12a56e532934cfab5c840d571db489ebec0c888f864f042bf307def5\",\n    \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3NTUzOTYyNjUtMTgzNDYiLCJlbWFpbCI6IiIsImV4cCI6MTc1NTM5OTg2NX0.cSUYRbsf3rWpagXFlpHANePjZWynomf6yDWOUqe2fqk\",\n    \"customer_email\": \"qa.wompi@test.com\",\n    \"currency\": \"COP\",\n    \"payment_method\": {\n        \"user_legal_id\": \"000\",\n        \"user_type\": 0,\n        \"financial_institution_code\": \"9999\",\n        \"user_legal_id_type\": \"XX\",\n        \"payment_description\": \"Compra de prueba PSE\",\n        \"type\": \"PSE\"\n    }\n}","contentType":"application/json","requestHeaders":"Accept\u003d*/*\r\n\t\t\t\tContent-Type\u003dapplication/json","requestCookies":"","responseHeaders":"Content-Type: application/json\r\nContent-Length: 169\r\nConnection: keep-alive\r\nDate: Sun, 17 Aug 2025 02:04:26 GMT\r\nvary: Origin\r\napigw-requestid: PbXKpit2IAMEb4g\u003d\r\nX-Cache: Error from cloudfront\r\nVia: 1.1 130ce7c752c5865952ded89032560b32.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Pop: MIA3-C3\r\nX-Amz-Cf-Id: CGN1hxL5zuCA6jNl5sZ2j-xl93gK5M6fbZ2-8ymBXUtX9lIHEQprBw\u003d\u003d\r\nX-XSS-Protection: 1; mode\u003dblock\r\nX-Frame-Options: SAMEORIGIN\r\nReferrer-Policy: strict-origin-when-cross-origin\r\nX-Content-Type-Options: nosniff\r\nStrict-Transport-Security: max-age\u003d31536000\r","responseCookies":"\r","responseBody":"{\n    \"error\": {\n        \"type\": \"INPUT_VALIDATION_ERROR\",\n        \"messages\": {\n            \"payment_method\": {\n                \"messages\": {\n                    \"user_legal_id_type\": [\n                        \"Debe ser uno de estos: RC, TI, CC, TE, CE, NIT, PP, DNI\"\n                    ]\n                }\n            }\n        }\n    }\n}","statusCode":422},"precondition":false,"level":3}]}]}]},{"number":10,"description":"Entonces el código de respuesta debe ser 422","duration":23,"startTime":"2025-08-16T21:04:25.952401-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0}],"userStory":{"id":"pse_transaccion","storyName":"Creación de transacción PSE en Wompi","displayName":"Creación de transacción PSE en Wompi","path":"pse_transaccion","pathElements":[{"name":"pse_transaccion","description":""}],"narrative":"  Como QA\n  Quiero crear una transacción PSE en sandbox\n  Para validar un flujo exitoso y escenarios alternos","type":"feature"},"title":"Error al crear PSE por documento inválido","description":"","backgroundTitle":"","backgroundDescription":"","tags":[{"name":"pse","type":"tag","displayName":"pse"}],"startTime":"2025-08-16T21:04:24.712540700-05:00[America/Bogota]","duration":13,"projectKey":"","isManualTestingUpToDate":false,"manual":false,"testSource":"Cucumber","actors":[{"name":"Juan","can":["call an API at https://api-sandbox.co.uat.wompi.dev/v1"]}],"order":0,"result":"SUCCESS"}